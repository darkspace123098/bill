<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Secure Bill Counter</title>
  <style>
    * { box-sizing: border-box; }

    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #fff3e0, #ffe0b2);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container, .login-container {
      background: #ffffff;
      padding: 25px 30px;
      border-radius: 16px;
      box-shadow: 0 4px 25px rgba(0, 0, 0, 0.1);
      width: 400px;
      max-height: 90vh;
      overflow-y: auto;
      transition: all 0.3s ease-in-out;
    }

    h3, h2 {
      text-align: center;
      color: #ff9800;
      font-size: 1.8em;
      margin-bottom: 25px;
    }

    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: 600;
      color: #333;
    }

    select, input, textarea, button {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1em;
    }

    textarea {
      height: 120px;
      resize: none;
    }

    button {
      background-color: #ff9800;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    button:hover { background-color: #f57c00; transform: scale(1.03); }

    .clear-btn { background-color: #e53935; }
    .clear-btn:hover { background-color: #c62828; }

    .logout-btn { background-color: #424242; }
    .logout-btn:hover { background-color: #212121; }

    .report {
      text-align: center;
      margin-top: 25px;
    }

    #salesReport, #detailedReport {
      max-height: 250px;
      overflow-y: auto;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fffdf8;
      margin-top: 10px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95em;
    }

    table, th, td {
      border: 1px solid #ccc;
      text-align: center;
      padding: 8px;
    }

    th {
      background-color: #ffe0b2;
      color: #333;
      position: sticky;
      top: 0;
      z-index: 1;
    }

    @media (max-width: 600px) {
      .container, .login-container {
        width: 90%;
        padding: 20px;
      }
      h3, h2 { font-size: 1.5em; }
    }
  </style>
</head>
<body>

  <!-- LOGIN SECTION -->
  <div class="login-container" id="loginContainer">
    <h2>Authorized Access Only</h2>
    <label for="username">Username:</label>
    <input type="text" id="username" placeholder="Enter username" required>
    <label for="password">Password:</label>
    <input type="password" id="password" placeholder="Enter password" required>
    <button id="loginBtn">Login</button>
  </div>

  <!-- BILL COUNTER SECTION -->
  <div class="container" id="billContainer" style="display:none;">
    <h3>Bill Counter</h3>

    <label for="myItem">Select Item:</label>
    <select id="myItem">
      <optgroup label="Sweet Corn">
        <option value="Classic Corn">Classic Corn - ‚Çπ30</option>
        <option value="Butter Burst">Butter Burst - ‚Çπ35</option>
        <option value="Maggi Masala Magic">Maggi Masala Magic - ‚Çπ45</option>
        <option value="Peppy Pepper">Peppy Pepper - ‚Çπ35</option>
        <option value="Creamy Mayo Delight">Creamy Mayo Delight - ‚Çπ40</option>
      </optgroup>
      <optgroup label="Lay's Chaat Creations">
        <option value="Normal Chaat">Normal Chaat - ‚Çπ50</option>
        <option value="Spicy Chaat">Spicy Chaat - ‚Çπ60</option>
        <option value="Loaded Chaat">Loaded Chaat - ‚Çπ80</option>
      </optgroup>
    </select>

    <label for="qty">Quantity:</label>
    <input type="number" id="qty" min="1" placeholder="Enter quantity" />

    <button id="addBtn">Add To Cart</button>
    <button id="clearCart" class="clear-btn">Clear Cart</button>

    <label for="cart">Cart Items:</label>
    <textarea id="cart" readonly placeholder="Your selected items will appear here..."></textarea>

    <label for="payMode">Mode Of Payment:</label>
    <select id="payMode">
      <option value="Cash">Cash</option>
      <option value="UPI">UPI</option>
    </select>

    <button id="submitBtn">Submit</button>

    <div class="report">
       <button id="totalSalesBtn">Total Sales Summary</button> 
      <button id="viewReport">View All Sales</button> 
      <button id="clearData" class="clear-btn">Clear All Data</button>
      <button id="logoutBtn" class="logout-btn">Logout</button>

      <div id="salesReport"></div>
      <div id="detailedReport"></div>
    </div>
  </div>

  <script>
    // ===== AUTHENTICATION SECTION =====
    const validUsers = [
      { username: "admin", password: "1234" },
      { username: "staff", password: "cornfest" },
      {username: "irshad", password: "irshad1234"}
    ];

    const loginContainer = document.getElementById("loginContainer");
    const billContainer = document.getElementById("billContainer");

    // Check login session
    if (localStorage.getItem("isLoggedIn") === "true") {
      loginContainer.style.display = "none";
      billContainer.style.display = "block";
    }

    document.getElementById("loginBtn").addEventListener("click", () => {
      const user = document.getElementById("username").value.trim();
      const pass = document.getElementById("password").value.trim();

      const found = validUsers.find(
        (u) => u.username === user && u.password === pass
      );

      if (found) {
        alert("‚úÖ Login successful!");
        localStorage.setItem("isLoggedIn", "true");
        loginContainer.style.display = "none";
        billContainer.style.display = "block";
      } else {
        alert("‚ùå Invalid credentials. Access denied!");
      }
    });

    // Logout
    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("isLoggedIn");
      billContainer.style.display = "none";
      loginContainer.style.display = "block";
      alert("üëã Logged out successfully!");
    });

    // ===== BILL COUNTER SECTION =====
    const itemPrices = {
      "Classic Corn": 30,
      "Butter Burst": 35,
      "Maggi Masala Magic": 45,
      "Peppy Pepper": 35,
      "Creamy Mayo Delight": 40,
      "Normal Chaat": 50,
      "Spicy Chaat": 60,
      "Loaded Chaat": 80,
    };

    const cart = [];
    const cartBox = document.getElementById("cart");

    document.getElementById("addBtn").addEventListener("click", () => {
      const item = document.getElementById("myItem").value;
      const qty = parseInt(document.getElementById("qty").value);

      if (!item || !qty || qty <= 0) {
        alert("Please select an item and valid quantity!");
        return;
      }

      const price = itemPrices[item];
      const total = price * qty;
      cart.push({ item, qty, price, total });
      cartBox.value = cart.map((c) => `${c.item} (x${c.qty}) - ‚Çπ${c.total}`).join("\n");
    });

    document.getElementById("clearCart").addEventListener("click", () => {
      cart.length = 0;
      cartBox.value = "";
    });

    document.getElementById("submitBtn").addEventListener("click", () => {
      if (cart.length === 0) {
        alert("Cart is empty!");
        return;
      }

      const payMode = document.getElementById("payMode").value;
      const orderId = "order_" + Date.now();
      const date = new Date().toLocaleString();
      const orderData = { id: orderId, cart: [...cart], payMode, date };

      let allOrders = JSON.parse(localStorage.getItem("orders")) || [];
      allOrders.push(orderData);
      localStorage.setItem("orders", JSON.stringify(allOrders));

      alert("‚úÖ Order saved successfully!");
      cart.length = 0;
      cartBox.value = "";
      document.getElementById("qty").value = "";
    });

    document.getElementById("totalSalesBtn").addEventListener("click", () => {
      const allOrders = JSON.parse(localStorage.getItem("orders")) || [];
      let cashTotal = 0, upiTotal = 0;
      allOrders.forEach((order) => {
        const total = order.cart.reduce((sum, c) => sum + c.total, 0);
        if (order.payMode === "Cash") cashTotal += total;
        else upiTotal += total;
      });
      document.getElementById("salesReport").innerHTML = `
        <table>
          <tr><th>Payment Mode</th><th>Total Sales (‚Çπ)</th></tr>
          <tr><td>Cash</td><td>${cashTotal}</td></tr>
          <tr><td>UPI</td><td>${upiTotal}</td></tr>
          <tr><th>Grand Total</th><th>${cashTotal + upiTotal}</th></tr>
        </table>`;
    });

    document.getElementById("viewReport").addEventListener("click", () => {
      const allOrders = JSON.parse(localStorage.getItem("orders")) || [];
      if (allOrders.length === 0) {
        document.getElementById("detailedReport").innerHTML = "<p>No sales records found.</p>";
        return;
      }

      let html = `
        <h4>Detailed Sales Report</h4>
        <table>
          <tr><th>Order ID</th><th>Date & Time</th><th>Payment</th><th>Items</th><th>Total (‚Çπ)</th></tr>
      `;
      allOrders.forEach((order) => {
        const items = order.cart.map((c) => `${c.item} x${c.qty}`).join(", ");
        const total = order.cart.reduce((sum, c) => sum + c.total, 0);
        html += `<tr><td>${order.id}</td><td>${order.date}</td><td>${order.payMode}</td><td>${items}</td><td>${total}</td></tr>`;
      });
      html += "</table>";
      document.getElementById("detailedReport").innerHTML = html;
    });

    document.getElementById("clearData").addEventListener("click", () => {
      if (confirm("‚ö†Ô∏è Delete all sales data permanently?")) {
        localStorage.removeItem("orders");
        document.getElementById("salesReport").innerHTML = "";
        document.getElementById("detailedReport").innerHTML = "";
        alert("üóëÔ∏è All sales data cleared successfully!");
      }
    });
  </script>
</body>
</html>
